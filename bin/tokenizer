#!/usr/bin/env ruby

require_relative '../lib/jack_tokenizer'

input_file = File.open(ARGV[0])
tokenizer = JackTokenizer.new(input_file)

puts("<tokens>")
while tokenizer.has_more_tokens?
  tokenizer.advance

  case tokenizer.token_type
  when :STRING_CONST
    token = tokenizer.string_val
    token_type = "stringConstant"
  when :INT_CONST
    token = tokenizer.int_val
    token_type = "integerConstant"
  else
    token = tokenizer.symbol
    token_type = tokenizer.token_type.downcase
  end

  puts("  <#{token_type}> #{token} </#{token_type}>")
end
puts("</tokens>")
